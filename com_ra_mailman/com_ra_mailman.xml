<?xml version="1.0" encoding="utf-8"?>
<!-- 05/12/22 CB Created
     01/08/23 CB add namespace
     07/08/23 CB remove admin/assets folder; remove menu for mailman reports
     09/09/23 CB added ra_renewals
     20/09/23 CB remove menu for configuration
     16/10/23 CB remove folder MailMan
     13/10/23 CB correction for canDo
     20/11/23 CB correct mail_lists /group_primary
     05/02/24 CB version 4.1.0, add site/languages and administrator/languages, delete ra_renewals
     25/03/24 CB created 4.1.2
     08/04/24 CB created 4.1.3
     12/09/24 CB revised handling of attachments from front end (version 4.1.8)
     14/11/24 CB created 4.1.13 from Airtop (without script)
     14/11/24 CB created 4.1.14 from Airtop (without script)
     14/11/24 CB created 4.1.14 from Airtop (without script) 
     13/01/24 CB created 4.1.16 from Airtop (with script)
     13/01/24 CB created 4.1.16-2 from Airtop (without script)
     13/01/24 CB created 4.1.7 from Airtop (without script)
     13/01/24 CB after rebuilding, created 4.2.0 from Airtop (without script)
     21/02/25 CB created 4.2.1 (with script)
     10/03/25 CB created 4.2.2 (with script)
     05/04/25 CB correct mailshot attachments
     09/04/25 CB correct mailshots model
     29/04/25 CB chance "name" to RA Mailman
     10/05/25 CB correct load of Insight data
     01/06/25 CB version 4.4.0 (new style for emails, import reports)
-->
<extension type="component" version="4.0" method="upgrade">
    <name>RA Mailman</name>
    <element>com_ra_mailman</element>
    <creationDate>19 May 2025</creationDate>
    <copyright>Copyright (C) 2022. All rights reserved.</copyright>
    <license>GNU General Public License version 2 or later; see LICENSE.txt</license>
    <author>Charlie Bigley</author>
    <authorEmail>webmaster@bigley.me.uk</authorEmail>
    <authorUrl>https://docs.stokeandnewcastleramblers.org.uk</authorUrl>
    <version>4.4.0</version>
    <description>Support for Mailing lists</description>
    <namespace path="src">Ramblers\Component\Ra_mailman</namespace>
    <scriptfile>script.php</scriptfile>
    <files folder="site">
        <folder>forms</folder>
        <folder>languages</folder>
        <folder>src</folder>
        <folder>tmpl</folder> 
    </files>
    <administration>
        <menu img="components/com_ra_tools/assets/logo_90px.png">RA Mailman</menu>
        <submenu>
            <menu link="option=com_ra_tools&amp;view=dashboard">Dashboard</menu>
            <menu link="option=com_ra_mailman&amp;view=mail_lsts" view="mail_lsts" img="components/com_ra_tools/assets/images/view-16x16-walks.png" alt="Ramblers/mail lists">Mailing lists</menu>
            <menu link="option=com_ra_mailman&amp;view=mailshots" view="mailshots" img="components/com_ra_tools/assets/images/view-16x16-walks.png" alt="Ramblers/Mailshots">Mailshots</menu>
            <menu link="option=com_ra_mailman&amp;view=subscriptions" view="subscriptions" img="components/com_ra_tools/assets/images/view-16x16-walks.png" alt="Ramblers/Subscriptions">Subscriptions</menu>
            <menu link="option=com_ra_mailman&amp;view=profiles" view="profiles" img="components/com_ra_tools/assets/images/view-16x16-walks.png" alt="Ramblers/MailMan users">MailMan users</menu>
            <menu link="option=com_ra_mailman&amp;view=dataload" view="dataload" img="components/com_ra_tools/assets/images/view-16x16-walks.png" alt="Ramblers/Import members">Import list of members</menu>
        </submenu>
        <files folder="administrator">
            <folder>forms</folder>
            <folder>languages</folder>
            <folder>services</folder>
            <folder>sql</folder>
            <folder>src</folder>
            <folder>tmpl</folder>   
            <filename>access.xml</filename>
            <filename>config.xml</filename>            
        </files>
    </administration>
    <!-- Runs on install -->
    <install>
        <sql>
            <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
        </sql>
    </install>
    <!-- Runs on uninstall -->
    <uninstall>
        <sql>
            <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
        </sql>
    </uninstall>
    <!-- Runs on update -->
    <update>
        <schemas>
            <schemapath type="mysql">sql/updates/mysql/</schemapath>
        </schemas>
    </update>
</extension>
